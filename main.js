!function(){"use strict";class t{constructor(t,e,s){this._name=t.name,this._link=t.link,this._cardSelector=e,this._handleImageClick=s,this._cardTemplate=document.querySelector(this._cardSelector),this._cardElement=this._getCardElement(),this._likeButton=this._cardElement.querySelector(".cards__like-button"),this._deleteButton=this._cardElement.querySelector(".cards__delete-button"),this._setEventListeners()}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeButton()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteButton()})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeButton(){this._likeButton.classList.toggle("cards__like-button-active")}_handleDeleteButton(){this._cardElement.remove(),this._cardElement=null}_getCardElement(){const t=this._cardTemplate.content.firstElementChild.cloneNode(!0);return this._cardTitleEl=t.querySelector(".cards__title"),this._cardImageEl=t.querySelector(".cards__image"),this._cardTitleEl.textContent=this._name,this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,t}getCardElement(){return this._cardElement}}class e{constructor(t,e){this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e,this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._setEventListeners()}_setEventListeners(){this._form.addEventListener("submit",(t=>{t.preventDefault(),this._toggleButtonState()}))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);e.textContent=t.validationMessage,t.classList.add(this._inputErrorClass),e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);e.textContent="",t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass)}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this.enableButton()}_hasInvalidInput(){return this._inputEls.some((t=>!t.validity.valid))}disableButton(){this._submitButton.setAttribute("disabled",!0),this._submitButton.classList.add(this._inactiveButtonClass)}enableButton(){this._submitButton.removeAttribute("disabled"),this._submitButton.classList.remove(this._inactiveButtonClass)}enableValidation(){this._inputEls.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputEls.forEach((t=>{this._hideInputError(t)}))}}class s{constructor(t){let{popupSelector:e}=t;this._popupSelector=e,this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),this._popupElement.querySelector(".modal__overlay").classList.add("modal__overlay_active"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),this._popupElement.querySelector(".modal__overlay").classList.remove("modal__overlay_active"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close-button").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(t=>{t.target.classList.contains("modal")&&this.close()}))}}class i extends s{constructor(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};super({popupSelector:t}),this._popup=document.querySelector(t),this._handleFormSubmit=e,this._form=this._popup.querySelector("form"),this._inputs=Array.from(this._form.querySelectorAll("input")),this._formData={},this._handleFormClose=s}_focusFirstInputField(){const t=this._inputs[0];t&&(t.focus(),t.select())}setInputValues(t){this._inputs.forEach((e=>{e.value=t[e.name]||""}))}open(t){this.setInputValues(t),super.open(),this._focusFirstInputField()}_getInputValues(){const t={};return this._inputs.forEach((e=>{t[e.name]=e.value})),t}close(){const t=this._getInputValues();this._formData=t,this._handleFormClose&&this._handleFormClose(t),super.close()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._formData={},this._form.reset(),this.close()}))}}const n=document.querySelector("#profile-edit-button"),r=(document.querySelector("#profile-title"),document.querySelector("#profile-subtitle"),document.querySelector("#add-card-button"));document.querySelector(".cards__list");let o={title:"",image:""};function l(t,e){m.open(t,e)}function a(e){return new t(e,"#card-template",l).getCardElement()}const c={};var u;u={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(u.formSelector)).forEach((t=>{const s=new e(u,t),i=t.getAttribute("name");c[i]=s,s.enableValidation()})),c["profile-form"].resetValidation(),c["card-form"].resetValidation();const d=new i("#profile-edit-modal",(function(t){p.setUserInfo({title:t.title,subtitle:t.subtitle}),d.close()})),_=new i("#add-card-modal",(function(t){const e=t.title,s=t.title,i=t.image;h.addItem(a({name:e,alt:s,link:i})),_.close(),c["card-form"].disableButton()}),(function(t){o={...t}})),m=new class extends s{constructor(t){super({popupSelector:t}),this._fullImage=this._popupElement.querySelector("#card-full-image"),this._fullImageTitle=this._popupElement.querySelector("#card-caption")}open(t){let{name:e,link:s}=t;this._fullImage.src=s,this._fullImage.alt=e,this._fullImageTitle.textContent=e,super.open()}}("#card-image-modal"),h=new class{constructor(t,e){let{items:s,renderer:i}=t;this._items=s,this._renderer=i,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:t=>{h.addItem(a(t))}},"#card-list");h.renderItems();const p=new class{constructor(t){let{title:e,subtitle:s}=t;this._title=document.querySelector(e),this._subtitle=document.querySelector(s)}getUserInfo(){return{title:this._title.textContent.trim(),subtitle:this._subtitle.textContent.trim()}}setUserInfo(t){let{title:e,subtitle:s}=t;this._title.textContent=e,this._subtitle.textContent=s}}({title:".profile__title",subtitle:".profile__subtitle"});d.setEventListeners(),_.setEventListeners(),m.setEventListeners(),n.addEventListener("click",(()=>{const{title:t,subtitle:e}=p.getUserInfo();d.open({title:t,subtitle:e}),c["profile-form"].resetValidation()})),r.addEventListener("click",(()=>{_.open(o)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUlsQnlCLEVBQWtCaEcsaUJBQWlCLFNBQVMsS0FDMUMsTUFBTSxNQUFFbUcsRUFBSyxTQUFFZSxHQUFhRixFQUFLcUIsY0FDakN2QixFQUFpQjNDLEtBQUssQ0FDcEJnQyxNQUFPQSxFQUNQZSxTQUFVQSxJQUVaVCxFQUFlLGdCQUFnQi9DLGlCQUFpQixJQUdsRHVDLEVBQWNqRyxpQkFBaUIsU0FBUyxLQUN0Q21ILEVBQWFoRCxLQUFLK0IsRUFBYSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcblxuICAgIC8vIEZldGNoIERPTSBlbGVtZW50cyBhbmQgc3RvcmUgdGhlbSBhcyBjbGFzcyBmaWVsZHNcbiAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRDYXJkRWxlbWVudCgpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuY2FyZHNfX2RlbGV0ZS1idXR0b25cIlxuICAgICk7XG5cbiAgICAvLyBCaW5kIGV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvLyBFdmVudCBsaXN0ZW5lcnMgc2V0dXBcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIExpa2UgYnV0dG9uIGV2ZW50IGxpc3RlbmVyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbigpO1xuICAgIH0pO1xuXG4gICAgLy8gRGVsZXRlIGJ1dHRvbiBldmVudCBsaXN0ZW5lclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uKCk7XG4gICAgfSk7XG5cbiAgICAvLyBDYXJkIGltYWdlIGNsaWNrIGV2ZW50IGxpc3RlbmVyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gTGlrZSBidXR0b24gaGFuZGxlclxuICBfaGFuZGxlTGlrZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fbGlrZS1idXR0b24tYWN0aXZlXCIpO1xuICB9XG5cbiAgLy8gRGVsZXRlIGJ1dHRvbiBoYW5kbGVyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24oKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xuICB9XG5cbiAgLy8gTWV0aG9kIHRvIGNyZWF0ZSB0aGUgY2FyZCBlbGVtZW50XG4gIF9nZXRDYXJkRWxlbWVudCgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9XG4gICAgICB0aGlzLl9jYXJkVGVtcGxhdGUuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX190aXRsZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgLy8gUHVibGljIG1ldGhvZCB0byBnZXQgdGhlIGNhcmQgZWxlbWVudFxuICBnZXRDYXJkRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yO1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbDtcbiAgICB0aGlzLl9pbnB1dEVscyA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgLy8gU2V0cyB1cCBpbml0aWFsIGV2ZW50IGxpc3RlbmVycyBmb3IgZm9ybSBzdWJtaXNzaW9uIGFuZCBpbnB1dCBldmVudHNcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgfSk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xuICAgIGNvbnN0IGVycm9yRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvckVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICAgIGVycm9yRWwudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0RWxzLnNvbWUoKGlucHV0RWwpID0+ICFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIHRydWUpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxuXG4gIC8vIEV2ZW50IGxpc3RlbmVycyBhcmUgZm9yIHJlYWwtdGltZSB2YWxpZGF0aW9uIGZlZWRiYWNrXG4gIC8vIEZ1bGZpbGxzICdlbmFibGVWYWxpZGF0aW9uJyBwdWJsaWMgbWV0aG9kIHJlcXVpcmVtZW50XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICAvLyBUb2dnbGUgc3VibWl0IGJ1dHRvbiBzdGF0ZVxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICAvLyBDbGVhciBpbnB1dCBlcnJvcnNcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fb3ZlcmxheVwiKVxuICAgICAgLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9fb3ZlcmxheV9hY3RpdmVcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fb3ZlcmxheVwiKVxuICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9fb3ZlcmxheV9hY3RpdmVcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIC8vIGhhbmRsZSBlc2MgYnV0dG9uXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gaGFuZGxlIGNsb3NlIGJ5IGNsb3NlIGJ1dHRvbiBjbGlja1xuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcbiAgICApO1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG5cbiAgICAvLyBoYW5kbGUgY2xvc2UgYnkgb3ZlcmxheSBjbGlja1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgaGFuZGxlRm9ybUNsb3NlID0gKCkgPT4ge30pIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcImlucHV0XCIpKTtcbiAgICB0aGlzLl9mb3JtRGF0YSA9IHt9O1xuICAgIHRoaXMuX2hhbmRsZUZvcm1DbG9zZSA9IGhhbmRsZUZvcm1DbG9zZTtcbiAgfVxuXG4gIF9mb2N1c0ZpcnN0SW5wdXRGaWVsZCgpIHtcbiAgICBjb25zdCBmaXJzdElucHV0ID0gdGhpcy5faW5wdXRzWzBdO1xuICAgIGlmIChmaXJzdElucHV0KSB7XG4gICAgICBmaXJzdElucHV0LmZvY3VzKCk7XG4gICAgICBmaXJzdElucHV0LnNlbGVjdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGhhdmUgcHJvZmlsZSBlZGl0IGZvcm0gaW5pdGlhbGx5IGRpc3BsYXkgcHJvZmlsZSB0aXRsZSBhbmQgc3VidGl0bGVcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgLy8gcHV0IGluIHRoZSBleGlzdGluZyBpbmZvIG9yIG5vdGhpbmdcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXSB8fCBcIlwiO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gT3BlbiB0aGUgcG9wdXAgYW5kIHNldCBpbml0aWFsIHZhbHVlc1xuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLnNldElucHV0VmFsdWVzKGRhdGEpO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9mb2N1c0ZpcnN0SW5wdXRGaWVsZCgpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICAvLyBsb29wIHRocm91Z2ggZXZlcnkgdHlwZSBvZiBpbnB1dCBmaWVsZCB1c2VyIGNhbiBkb1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgLy8gZm9yIGVhY2ggaW5kaXZpZHVhbCBpbnB1dCBmaWVsZCwgdXNlIGl0cyBuYW1lIGFzIGEga2V5IGluIHRoZVxuICAgICAgLy8gaW5wdXRWYWx1ZXMgb2JqZWN0LiB0aGVuIGFzc2lnbiB0aGUgdXNlciBpbnB1dCB0byB0aGF0IGtleSdzIHZhbHVlXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGZvcm1WYWx1ZXM7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBjb25zdCBmb3JtVmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICB0aGlzLl9mb3JtRGF0YSA9IGZvcm1WYWx1ZXM7XG4gICAgaWYgKHRoaXMuX2hhbmRsZUZvcm1DbG9zZSkge1xuICAgICAgdGhpcy5faGFuZGxlRm9ybUNsb3NlKGZvcm1WYWx1ZXMpO1xuICAgIH1cbiAgICBzdXBlci5jbG9zZSgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5fZm9ybURhdGEgPSB7fTtcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWtlLWxvdWlzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3Zhbm9pc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gIH0sXG5dO1xuXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG4iLCIvLyBKUyBpbXBvcnRzXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuXG4vLyBvdGhlciBpbXBvcnRzXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgc2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbi8vICEgRUxFTUVOVFNcblxuLy8gRWRpdCBwcm9maWxlXG5cbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlXCIpO1xuY29uc3QgcHJvZmlsZVN1YnRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXN1YnRpdGxlXCIpO1xuXG4vLyBBZGQgbmV3IGNhcmRcbmNvbnN0IGFkZENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWJ1dHRvblwiKTtcbmNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vLyBzdG9yZSBmb3JtIGRhdGEgdG8gYWxsb3cgZm9yIHNhdmluZyBvZiBkYXRhXG4vLyBkZXNwaXRlIG9wZW5pbmcgYW5kIGNsb3NpbmcgbW9kYWwuIG9ubHkgY2xlYXJlZFxuLy8gd2hlbiBmb3JtIHN1Ym1pdHRlZFxubGV0IGNhcmRGb3JtRGF0YSA9IHtcbiAgdGl0bGU6IFwiXCIsXG4gIGltYWdlOiBcIlwiLFxufTtcblxuLy8gISBGVU5DVElPTlNcblxuLy8gYWxsb3dzIHNhdmluZyBvZiBkYXRhIHdoZW4gYWRkIGNhcmQgbW9kYWwgaXMgY2xvc2VkXG4vLyBhbmQgcmUtb3BlbmVkLCBidXQgbm90IHN1Ym1pdHRlZFxuZnVuY3Rpb24gdXBkYXRlQ2FyZEZvcm1EYXRhKGRhdGEpIHtcbiAgY2FyZEZvcm1EYXRhID0geyAuLi5kYXRhIH07XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcbiAgaW1hZ2VQcmV2aWV3UG9wdXAub3BlbihuYW1lLCBsaW5rKTtcbn1cblxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGEgbmV3IGNhcmQgZWxlbWVudFxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlQ2FyZEltYWdlQ2xpY2spO1xuICByZXR1cm4gY2FyZC5nZXRDYXJkRWxlbWVudCgpO1xufVxuXG4vLyAhIEZPUk0gVkFMSURBVE9SXG5cbi8vIGRlZmluZSBhbiBvYmplY3QgZm9yIHN0b3JpbmcgdmFsaWRhdG9yc1xuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcblxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChzZXR0aW5ncykgPT4ge1xuICAvLyBtYWtlIGFuIGFycmF5IG9mIGFsbCBmb3JtcyBhbmQgZ3JhYiBhbGwgdGhlaXIgZWxlbWVudHMgKHNlZSBzZXR0aW5ncylcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XG4gIC8vIGl0ZXJhdGUgdGhyb3VnaCBlYWNoIGVsZW1lbnRcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xuICAgIGNvbnN0IGZvcm1OYW1lID0gZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgICAvLyBhc3NpZ24gdmFsaWRhdG9ycyB0byB0aGUgcGFzc2VkLWluIGZvcm1OYW1lIGFuZCBlbmFibGUgdmFsaWRhdGlvblxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuXG5mb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbmZvcm1WYWxpZGF0b3JzW1wiY2FyZC1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuXG4vLyAhIEVWRU5UIEhBTkRMRVJTXG5cbi8vIFByb2ZpbGUgZWRpdCBoYW5kbGVyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChwcm9maWxlRGF0YSkge1xuICB1c2VyLnNldFVzZXJJbmZvKHtcbiAgICB0aXRsZTogcHJvZmlsZURhdGEudGl0bGUsXG4gICAgc3VidGl0bGU6IHByb2ZpbGVEYXRhLnN1YnRpdGxlLFxuICB9KTtcbiAgcHJvZmlsZUVkaXRQb3B1cC5jbG9zZSgpO1xufVxuXG4vLyBBZGQgY2FyZCBoYW5kbGVyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KG5ld0NhcmREYXRhKSB7XG4gIGNvbnN0IG5hbWUgPSBuZXdDYXJkRGF0YS50aXRsZTtcbiAgY29uc3QgYWx0ID0gbmV3Q2FyZERhdGEudGl0bGU7XG4gIGNvbnN0IGxpbmsgPSBuZXdDYXJkRGF0YS5pbWFnZTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoeyBuYW1lLCBhbHQsIGxpbmsgfSkpO1xuICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgZm9ybVZhbGlkYXRvcnNbXCJjYXJkLWZvcm1cIl0uZGlzYWJsZUJ1dHRvbigpO1xufVxuXG4vLyAhIElOU1RBTlRJQVRFIENMQVNTRVNcblxuLy8gRWRpdCBwcm9maWxlIGZvcm1cbmNvbnN0IHByb2ZpbGVFZGl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XG4pO1xuXG4vLyBBZGQgY2FyZCBmb3JtXG5jb25zdCBhZGRDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjYWRkLWNhcmQtbW9kYWxcIixcbiAgaGFuZGxlQWRkQ2FyZFN1Ym1pdCxcbiAgLy8gbmV3IGhhbmRsZXIgdG8gYWxsb3cgZm9yIHNhdmluZyBvZiBkYXRhIG9uIG1vZGFsIGNsb3NlXG4gIHVwZGF0ZUNhcmRGb3JtRGF0YVxuKTtcblxuLy8gRnVsbCBpbWFnZSBwb3B1cFxuY29uc3QgaW1hZ2VQcmV2aWV3UG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjY2FyZC1pbWFnZS1tb2RhbFwiKTtcblxuLy9TZWN0aW9uXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xuICAgIH0sXG4gIH0sXG4gIFwiI2NhcmQtbGlzdFwiXG4pO1xuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG4vLyBVc2VyIEluZm9cbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe1xuICB0aXRsZTogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgc3VidGl0bGU6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXG59KTtcblxuLy8gISBFVkVOVCBMSVNURU5FUlMgRk9SIFBPUFVQU1xuXG5wcm9maWxlRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmltYWdlUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vICEgRVZFTlQgTElTVEVORVJTIEZPUiBCVVRUT05TXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGUsIHN1YnRpdGxlIH0gPSB1c2VyLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVFZGl0UG9wdXAub3Blbih7XG4gICAgdGl0bGU6IHRpdGxlLFxuICAgIHN1YnRpdGxlOiBzdWJ0aXRsZSxcbiAgfSk7XG4gIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZS1mb3JtXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oY2FyZEZvcm1EYXRhKTtcbn0pO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2Z1bGxJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtZnVsbC1pbWFnZVwiKTtcbiAgICB0aGlzLl9mdWxsSW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtY2FwdGlvblwiKTtcbiAgfVxuXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcbiAgICB0aGlzLl9mdWxsSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9mdWxsSW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9mdWxsSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2xhc3NTZWxlY3Rvcikge1xuICAgIC8vIGl0ZW1zIC0gYXJyYXkgb2YgZGF0YVxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgLy8gcmVuZGVyZXIgLSBjcmVhdGVzIGFuZCBhZGRzIGEgc2luZ2xlIGl0ZW0gdG8gcGFnZVxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgLy8gd2hlcmUgdG8gYWRkIHRoZSBlbGVtZW50c1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gIH1cblxuICAvLyBjYWxsIG9uY2Ugb24gcGFnZSBsb2FkXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gd2hlbiBhZGRpbmcgbmV3IGluZGl2aWR1YWwgY2FyZHNcbiAgYWRkSXRlbShuZXdJdGVtKSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQobmV3SXRlbSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyB0aXRsZSwgc3VidGl0bGUgfSkge1xuICAgIHRoaXMuX3RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZSk7XG4gICAgdGhpcy5fc3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHN1YnRpdGxlKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0aXRsZTogdGhpcy5fdGl0bGUudGV4dENvbnRlbnQudHJpbSgpLFxuICAgICAgc3VidGl0bGU6IHRoaXMuX3N1YnRpdGxlLnRleHRDb250ZW50LnRyaW0oKSxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyB0aXRsZSwgc3VidGl0bGUgfSkge1xuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gICAgdGhpcy5fc3VidGl0bGUudGV4dENvbnRlbnQgPSBzdWJ0aXRsZTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9jYXJkVGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfY2FyZEVsZW1lbnQiLCJfZ2V0Q2FyZEVsZW1lbnQiLCJfbGlrZUJ1dHRvbiIsIl9kZWxldGVCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdXR0b24iLCJfaGFuZGxlRGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZUVsIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlRWwiLCJ0ZXh0Q29udGVudCIsInNyYyIsImFsdCIsImdldENhcmRFbGVtZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpbnB1dEVsIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImVycm9yRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkIiwiX2hhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJlbmFibGVCdXR0b24iLCJzb21lIiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiZW5hYmxlVmFsaWRhdGlvbiIsImZvckVhY2giLCJyZXNldFZhbGlkYXRpb24iLCJpbnB1dEVsZW1lbnQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJoYW5kbGVGb3JtQ2xvc2UiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzdXBlciIsIl9wb3B1cCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0cyIsIl9mb3JtRGF0YSIsIl9oYW5kbGVGb3JtQ2xvc2UiLCJfZm9jdXNGaXJzdElucHV0RmllbGQiLCJmaXJzdElucHV0IiwiZm9jdXMiLCJzZWxlY3QiLCJzZXRJbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwicmVzZXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJjYXJkRm9ybURhdGEiLCJ0aXRsZSIsImltYWdlIiwiaGFuZGxlQ2FyZEltYWdlQ2xpY2siLCJpbWFnZVByZXZpZXdQb3B1cCIsImNyZWF0ZUNhcmQiLCJjYXJkRGF0YSIsImZvcm1WYWxpZGF0b3JzIiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJmb3JtTmFtZSIsImdldEF0dHJpYnV0ZSIsInByb2ZpbGVFZGl0UG9wdXAiLCJwcm9maWxlRGF0YSIsInVzZXIiLCJzZXRVc2VySW5mbyIsInN1YnRpdGxlIiwiYWRkQ2FyZFBvcHVwIiwibmV3Q2FyZERhdGEiLCJzZWN0aW9uIiwiYWRkSXRlbSIsIl9mdWxsSW1hZ2UiLCJfZnVsbEltYWdlVGl0bGUiLCJjbGFzc1NlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJuZXdJdGVtIiwicHJlcGVuZCIsIl90aXRsZSIsIl9zdWJ0aXRsZSIsImdldFVzZXJJbmZvIiwidHJpbSIsIl9yZWYyIl0sInNvdXJjZVJvb3QiOiIifQ==